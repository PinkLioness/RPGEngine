<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title></title>
	<link rel="stylesheet" type="text/css" href="p.css">
</head>
<body>
	<div id="wrapper">
		<header>Test header!</header>
		<div class="middle">

			<div class="container">
				<main id="textArea">
					maintest
				</main>
			</div>

			<aside id="statArea">sidebar</aside>
		</div>
	</div>
	<footer id="buttonArea"></div>
	<script>
	'use strict';
	// If I see a file without 'use strict', https://www.youtube.com/watch?v=3X6eTxnh60E (and if any of you perverts think you'll enjoy it, warn me so I can use an iron rod instead)
	
	// TODO: Split this into separate files
	// TODO: Figure out HOW it will be split, tentatively:
	/* 
	one file defines the player (and the inventory? TODO: Think on this),
	other the game startup code,
	other save and load code, - TODO
	other the town code, - TODO
	other the adventure code, - TODO
	other the event parser code - TODO, probably similar to how monsters are done (nested objects with functions for each event option? Easy as shit to code events, but anything with more than 4 or 5 nested options becomes a cthulhu)
	one for the generic template monster - for ease of understanding the monster code and creating mods // TODO: Consider implementing an interface for creating simple monsters that don't need custom code?
	
	And now for the most important question:
	One monster per file? This would be the best, other than the potential of having around a hundred lines importing scripts. // TODO: Research if this may cause problems
	^^^ Same for events
	*/
	// TODO: FOR THE LOVE OF GOD TEST THE SPLITTING
	
	function doesNothing(){};
	function randomIntFromInterval(min,max){return Math.floor(Math.random()*(max-min+1)+min);};
	function randomPercentageMultiplierFromInterval(min,max){
		/**
		 * This function is intended to be used when you want, say, a player stat + something between 10 and 25% of it. Multiply the value by the result of this function.
		 * @return A number between ([min, max] / 100) + 1
		 */
		var random = randomIntFromInterval(min, max);
		var randomPercentage = random / 100;
		return 1 + randomPercentage;
	};

	var GAME = {
		events:{
			battleOver:new CustomEvent('battleOver') // TODO: Figure out if it's better to place the events in a structure like this, or if the ability to pass the detail argument* to customize things outweighs the benefit of code centralization.
			// * See parameters here: https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Constructor
		},
		init:function(){
			GAME.interface.init();

			GAME.main.mainMenu();
		},
		
	}
	

	
	function functionButtonfuckVaginal(){ // TODO: debug, remove after done
		fuck (feralWolf, 'vagina');
	};
	
	/**
	* Does all the math for the fucking (or passes it ahead), then:
	* 1- Applies special effects for the monster
	* 2- Should not apply the special effect of the scene? TODO: figure this out
	* 3- This is where the stretching is calculated, YET this is not where the skill should increase TODO: figure this out too
	*
	* @param partner - the monster OBJECT (can't emphasize this enough), probably will always be GAME.currentMonster outside of special events and post-defeat rape
	* @param where - a string, either 'vagina' or 'ass'. Validated, panics out if not one of these and proceeds to assume the ass TODO: Will the player ALWAYS have an ass? Might change it to assume mouth later?
	*
	* @ TODO: Figure out where in the code structure this needs to be passed to and adapt it
	* @ TODO: Figure out a more unique name (tentatively, simulateSex?) for it to make it easier for those who don't know the code to ctrl+f for it
	*/
	function fuck (partner, where) {
		// validating the where parameter
		if (!(where === 'ass' || where === 'vagina')){
			alert("BUG ALERT! READ EVERYTHING IN CAPS CAREFULLY! Some piece of bad code (bad, bad code, no treat for you) told the monster to fuck you somewhere that wasn't the ass or the vagina! Assuming they meant your ass, if you don't have an asshole THE GAME MIGHT BREAK SO DO NOT OVERWRITE YOUR SAVE AND REPORT THIS AS SOON AS POSSIBLE!");
			where = 'ass';
		};
		
		var p = GAME.p;
		partner.generateNew(); // DEBUG
		var ifCame = false;
		// text
		// change p
		// ???
		
		p.addLust(1);
		if (p.lust > 100) { // if player came TODO: Make this a function, maybe? If there's need to use it in more than one place, then yes
			p.changeLustToAfterOrgasm(); // some lust remains, only when you sleep with some toys it goes back to 0 // TODO: Is this a good idea? Sounds good on paper, needs testing.
			ifCame = true;
			
			p.addAddiction(5);
			p.addTired(-3);
			
			GAME.interface.addText(p.texts.generateOrgasmText());
		};
		
		
		
		//p.cash += p.applyCashUpgrades(((p.inHeat()) ? (cash * 2) : cash)); // double cash in heat
		
		
		// Filling player up and checking for overflow
		
		// TODO: Pass these calculations to a function? If for some reason there's need to use it in more than one place, then yes, otherwise we're trading code understandability for cleanliness and i kinda prefer the first
		// TODO: Better math for gameplay reasons? At the moment your average feral wolf cums between 8 and 20ml, and the player can take 500ml, this means 500/14 = ~38 fucks to get completely filled, this would make the game VERY repetitive.
		var cumAmount = 0;
		cumAmount += ((p.ifCame) ? (partner.ballsize * 5) : (partner.ballsize * 4)); // extra cum if player came
		cumAmount += ((p.inHeat()) ? (partner.ballsize * 2) : 0) // extra cum in heat
		cumAmount = p.applyCumUpgrades(cumAmount); // apply upgrades that affect cum
		
		p.addCum(where, cumAmount, partner.uniqueName);
		
		//////////////////////////////////////////////////////////////
		// soreness // TODO: PASS THESE TO SKILL-INCREASE-RELATED FUNCTIONS
		var sorenessBase = (where == 'vagina') ? 0.2 : 0.3; // more soreness if taking it in the ass
		sorenessBase -= (p.inHeat()) ? 0.1 : 0; // Less soreness during heat
		p.soreness[where] += sorenessBase * partner.dicksize; 
		//////////////////////////////////////////////////////////////
		
		
		
		
		//////////////////////////////////////////////////////////////
		// pregnancy
		if (p.canGetPregnantFrom[where] && p.inHeat()){
			var addedChance = Math.floor(p.cumInside[where].amount / 10);
			if (randomBetween(0, 100) < (p.basePregnancyRate + addedChance)){
				p.startPregnancy(partner, where);
			};
		};
		//////////////////////////////////////////////////////////////
		
		
		
		
		
		//////////////////////////////////////////////////////////////
		// tiredness // TODO: pass this to adventure code to treat cases like running away
		p.addTired(1);
		//////////////////////////////////////////////////////////////
		
		GAME.p = p;
		console.log(GAME.p); // DEBUG
	}
	
	var buttons = document.getElementById('buttonArea');
	var buttonFuckVaginal = document.createElement('button');
		buttonFuckVaginal.innerHTML = "Fuck vagina";
		buttons.appendChild(buttonFuckVaginal);
		buttonFuckVaginal.onclick = functionButtonfuckVaginal;
	
	
	
	/*
	
	http://en.wiktionary.org/wiki/Wikisaurus:testicles
	
	IDEAZ
	
	alguma coisa relacionada a ovos? 
	
	glitter lion *_* // possible infection??? 8D
	tribal lions
	anubis-like jackals with gold cum
	horses, duh
	tentacle monsters?
	a hen with a tie // joke scene obviously porque huehuehuehueheuheuheuheuehueheuheuehuheuehueheuheuheue
	koalas?
	lobo guará
	random encounter in the jungle: capybara with rattlesnake (cascavel) comendo uma casa de madeira e fazendo um buraco, enquanto uma mulher pede ajuda pra um tucano pra espantar ela
	alien do aliens?
	
	
	Free for taking:
	ents
	alraunes? (MALE) Plant monsters in general too, begging for tentacles
	sergal
	bears, variations: pandas, arctic, grizzly, black, etc.
	Slimegirls
	
	
	itens alamdiçoados que causam efeitos: 
	bra of milk production?
	TODO: pensar mais nisso
	
	//////////////////////////////////////////////////
	// INFECTIONS:
	4 types:
	skin: Changes overall skin appearance: leather, rubber, gel (variations: pudding (random giga-puddi encounter?), chocolate?)?, scales, glass, metals (mercury, gold, silver, etc etc. provavelmente implementar usando o mesmo esquema de cor do lobo, só trocando o termo na frase)
	Shape: Body shape, fox, feline, etc. etc.
	Tail?
	Head?
	Wings?
	Possivelmente salpicar eventos pra lá e pra cá, pra por exemplo, quando o cara tiver com infecção de borracaha ele não poder equipar armas porque as mãos viraram mittens (possivelmente curar isso com uma poção fácil de conseguir, ams sem perder a transformação?)
	
	random gangbangs?
	
20:51 - AEykzel: imagina um tipo de lupino, com rosto um tanto mais were a lupino que o usual, bulge absurdamente grande comparado a e um físico mais forte que o usual, mas sem fugir do conceito hound; a cum dele é mais espessa que a cum usual e tem propriedades were em "humanos" ou seres anthros; also tendência a dar rape em qualquer anthro que se aproxime e atacar em bando, because yayz for gangbang <3

	nisharu:
	75% ass chance
	plate armor pro corpo e pra parte taur, com a bunda desprotegida e uma espada comum
	'You see something very close to you and hide. Taking a careful closer look, you can see a brown taur creature... A fox, judging by the fluffy tail that moves slightly. Moving a bit around it you see a thick, heavy-looking set of plate mail covering his chest and most of his back. He also has a sheated sword close to his hand, convincing you that a battle would be considerably hard. Its hind legs and butt are completely uncovered, however, letting you take a glimpse at his '+GAME.currentMonster.getDickAdjective()+'. '+(randomIntFromInterval(0,1) == 1 ? 'As you are sizing up his balls, his tail swishes to a side and you can\'t help but notice that his asshole looks like a very constantly used one. ' : '')+' You can\'t see his member from where you are, and moving around would be too dangerous as the beast seems very alert.'
	when m surps p, allow battle
	versão com roupa de borracha, infecciosa, brown, blue and green




















	*/
	
	document.addEventListener("DOMContentLoaded", function(event) {
		GAME.init();
	});
	
	</script>
	<script src="player.js"></script>
	<script src="main.js"></script>
	<script src="interface.js"></script>
	<script src="battle.js"></script>
	<script src="monster.js"></script>
</body>
</html>